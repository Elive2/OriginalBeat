!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o=window.webpackJsonp;window.webpackJsonp=function(n,r){for(var a,s,l=0,c=[];l<n.length;l++)s=n[l],i[s]&&c.push.apply(c,i[s]),i[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(o&&o(n,r);c.length;)c.shift().call(null,e)};var n={},i={1:0};return e.e=function(t,o){if(0===i[t])return o.call(null,e);if(void 0!==i[t])i[t].push(o);else{i[t]=[o];var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e.p+"../../../static/"+t+".js",n.appendChild(r)}},e.m=t,e.c=n,e.p="",e(0)}([function(t,e,o){function n(t){if(isNaN(t)||t<0||t>127)return null;var e=a[t%12],o=Math.floor(t/12)-1;return e+o}function i(t){console.log("formating the midi file for pianoroll");for(var e={tempo:120,timeSignature:[4,4]},o=[],i=0;i<t.tracks[0].notes.length;i++){var r=t.tracks[0].notes[i],a={time:Math.floor(r.ticks/20).toString()+"i",midiNote:r.midi,note:n(r.midi),velocity:1,duration:Math.floor(r.durationTicks/20).toString()+"i"};o.push(a)}for(var i=0;i<t.tracks[1].notes.length;i++){var r=t.tracks[1].notes[i],a={time:Math.floor(r.ticks/20).toString()+"i",midiNote:r.midi,note:n(r.midi),velocity:1,duration:Math.floor(r.durationTicks/20).toString()+"i"};o.push(a)}var s={header:e,notes:o};return s}var r="http://127.0.0.1:8000/midi/",a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];o.e(0,function(t){var e=[t(61),t(46),t(50),t(40),t(4),t(67),t(54),t(71),t(1),t(41),t(42),t(53)];(function(t,e,o,n,a,s,l,c,d,u,p,f){t(function(){var t=new o,c=new e(document.body),m=new n(document.body);new p(document.body,c,m);f.fromUrl(r).then(function(t){console.log("MIDI NAME"),final_mid=i(t),console.log("FORMATTED MIDI"),console.log(final_mid),c.setScore(final_mid)});console.log(s),m.onInstrument(function(e){t.setInstrument(e)}),m.onPlay(function(e){e?(d.context.resume(),c.start()):(c.stop(),t.releaseAll())}),m.onScore(function(t){c.setScore(t)}),c.onnote=function(e,o,n,i){t.triggerAttackRelease(e,o,n,i)},c.onstop=function(){t.releaseAll()};new u(function(){a.stop(),c.stop(),m.stop()});window.parent.postMessage("loaded","*");var h=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(h){var g=document.createElement("div");g.id="iOSTap",document.body.appendChild(g),new l(d.context,g).then(function(){g.remove(),window.parent.postMessage("ready","*")})}else window.parent.postMessage("ready","*")})}).apply(null,e)})}]);